(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[18],{8530:function(e,t,a){"use strict";var r=a("tAuX"),l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var d=l(a("p0pE")),s=l(a("eHn4"));a("7Kak");var n=l(a("9yH6"));a("y8nQ");var i=l(a("Vl3Y"));a("+L6B");var u=l(a("2/Rp"));a("jCWc");var o=l(a("kPKH"));a("5NDa");var c=l(a("5rEg")),p=l(a("2Taf")),f=l(a("vZ4D")),m=l(a("l4Ni")),h=l(a("ujKo")),y=l(a("MhPg"));a("OaEy");var g=l(a("2fM7")),v=r(a("q1tI")),E=l(a("aaR9")),D=a("MuoO"),b=(a("+n12"),g.default.Option),P=function(e){function t(){var e;return(0,p.default)(this,t),e=(0,m.default)(this,(0,h.default)(t).call(this)),e.handleSubmit=function(t){t.preventDefault(),e.props.form.validateFields(function(t,a){if(!t){a.keys,a.names;a["network_id"]=e.props.mountedData.id,e.props.dispatch({type:"router/createPort",payload:a})}})},e.state={selected:"",fixed_ip:"",selectedSubnets:[]},e}return(0,y.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.subnet.subnetList.filter(function(t){return e.props.mountedData.subnets.includes(t.id)});this.setState({selectedSubnets:t})}},{key:"handleChange",value:function(e){this.setState({selected:e})}},{key:"handleChange2",value:function(e){this.setState({selected2:e})}},{key:"handleChange3",value:function(e){this.setState({selected3:e})}},{key:"render",value:function(){var e,t=this,a=/^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/;this.props.form.getFieldDecorator,this.props.initalValues;return"modal"===this.props.type?v.default.createElement(i.default,{onSubmit:this.handleSubmit,layout:"vertical",hideRequiredMark:!0},v.default.createElement(E.default,{title:"Port name",paragraph:"Select a name for identification",style:{padding:"10px"},dataKey:"name",decorator:{rules:[{message:"Please enter correct port name",pattern:/^[a-zA-Z]+([ -_.]?[a-zA-Z0-9]+)*$/},{required:!0,message:"Please enter port name"}]},getFieldDecorator:this.props.form.getFieldDecorator,span:24},v.default.createElement(c.default,{size:"default",style:{width:"500px"}})),v.default.createElement(E.default,{title:"Specify ip address or subnet",style:{padding:"10px"},dataKey:"specify_ip",decorator:{rules:[{required:!0,message:"Please specify ip address or subnet"}]},getFieldDecorator:this.props.form.getFieldDecorator,span:24},v.default.createElement(g.default,{style:{width:120},onSelect:function(e){return t.handleChange(e)}},v.default.createElement(b,{value:"fixed_ip"}," Fixed ip "),v.default.createElement(b,{value:"subnet_id"}," Subnet"))),"fixed_ip"===this.state.selected?v.default.createElement(o.default,null,v.default.createElement(E.default,{title:"Fixed Ip",style:{padding:"10px"},dataKey:"fixed_ip",decorator:{rules:[{message:"Please enter correct IP address",pattern:a},{required:!0,message:"Please enter IP address"}]},getFieldDecorator:this.props.form.getFieldDecorator,span:24},v.default.createElement(c.default,{size:"default",style:{width:"500px"}}))):null,"subnet_id"===this.state.selected?v.default.createElement(o.default,null,v.default.createElement(E.default,{title:"Subnets",style:{padding:"10px"},dataKey:"subnet_id",decorator:{rules:[{required:!0,message:"Please select subnet"}]},getFieldDecorator:this.props.form.getFieldDecorator,span:24},v.default.createElement(g.default,{style:{width:120},onSelect:function(e){return t.handleChange2(e)}},this.state.selectedSubnets.map(function(e){return v.default.createElement(b,{value:e.id}," ",e.name," ")})))):null,v.default.createElement(E.default,{title:"VNIC type",style:{padding:"10px"},dataKey:"binding__vnic_type",decorator:{rules:[{required:!0,message:"Please select VNIC type"}]},getFieldDecorator:this.props.form.getFieldDecorator,span:24},v.default.createElement(g.default,{style:{width:120},onSelect:function(e){return t.handleChange3(e)}},v.default.createElement(b,{value:"normal"}," Normal "))),v.default.createElement(i.default.Item,null,v.default.createElement(u.default,{style:{margin:"10px"},loading:this.props.createPort,type:"primary",htmlType:"submit"},"Submit"))):v.default.createElement(i.default,null,v.default.createElement(E.default,{title:"name",paragraph:"Select a name for identification",style:{padding:"10px"},dataKey:"subnet_name",decorator:{rules:[{required:!0,message:"Please enter a port name"}]},getFieldDecorator:this.props.form.getFieldDecorator,span:24},v.default.createElement(c.default,{size:"default",style:{width:"500px"}})),v.default.createElement(E.default,{title:"Device Id",paragraph:"Please enter device Id",style:{padding:"10px"},dataKey:"cidr",decorator:{rules:[{required:!0,message:"Please enter a port name"}]},getFieldDecorator:this.props.form.getFieldDecorator,span:24},v.default.createElement(c.default,{size:"default",style:{width:"500px"}})),v.default.createElement(E.default,{title:"Device Owner",paragraph:"Select IP version",style:{padding:"10px"},dataKey:"ip_version",decorator:{rules:[{required:!0,message:"you must select IP version"}]},getFieldDecorator:this.props.form.getFieldDecorator,span:12},v.default.createElement(n.default.Group,(e={style:{width:"100%"},size:"default"},(0,s.default)(e,"style",{width:"500px"}),(0,s.default)(e,"buttonStyle","solid"),e),v.default.createElement(n.default.Button,{style:{width:"50%",textAlign:"center"},value:"4"},"IPV4"),v.default.createElement(n.default.Button,{style:{width:"50%",textAlign:"center"},value:"6",disabled:!0},"IPV6"))),v.default.createElement(E.default,{title:"Gateway",style:{padding:"10px"},paragraph:"Specify the IP Address used for the Network gateway. If left blank, the first\n                    available IP address within your Network CIDR will be automatically chosen.",dataKey:"gateway_ip",decorator:{rules:[{message:"Please enter correct Gateway IP address",pattern:/((25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)(,\n|,?$))/}]},getFieldDecorator:this.props.form.getFieldDecorator,span:24},v.default.createElement(c.default,{size:"default",style:{width:"500px"}})),v.default.createElement(E.default,{title:"DNS Addresses",style:{padding:"10px"},paragraph:"Enter DNS nameservers seperated by a comma.",dataKey:"dns_servers",decorator:{rules:[{message:"Please enter DNS nameservers in correct form",pattern:/((25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)(,\n|,?$))/}]},getFieldDecorator:this.props.form.getFieldDecorator,span:24},v.default.createElement(c.default,{size:"default",style:{width:"500px"}})))}}]),t}(v.PureComponent),w=(0,D.connect)(function(e){return(0,d.default)({createPort:e.loading.effects["router/createPort"],security_groups:e.securitygroup,subnet:e.vpc},e.router)})(i.default.create({onValuesChange:function(e,t){var a=e.dispatch;a({type:"router/updateFormData",payload:(0,d.default)({},t)})}})(P));t.default=w}}]);