(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[29],{dkDh:function(t,e,a){"use strict";var n=a("g09b"),l=a("tAuX");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("g9YV");var u=n(a("wCAj"));a("7Kak");var r=n(a("9yH6"));a("T2oS");var o,d,f=n(a("W9HT")),i=n(a("2Taf")),s=n(a("vZ4D")),c=n(a("l4Ni")),h=n(a("ujKo")),p=n(a("MhPg")),m=n(a("p0pE")),g=l(a("q1tI")),v=n(a("+JSP")),y=a("MuoO"),M=a("fVDY"),b=a("RBnf"),S=n(a("wd/R")),E=[{title:"Month",dataIndex:"month",key:"month",width:150},{title:"Amount Due(SAR)",dataIndex:"rate",key:"rate",width:150,align:"center"}],k=(o=(0,y.connect)(function(t){var e=t.global,a=t.loading;return{isLoadingData:a.effects["global/fetchSpends"],global:(0,m.default)({},e)}}),o(d=function(t){function e(t){var a;return(0,i.default)(this,e),a=(0,c.default)(this,(0,h.default)(e).call(this,t)),a.state={date:null,summary:[]},a}return(0,p.default)(e,t),(0,s.default)(e,[{key:"handleMonthSelect",value:function(t){var e=this.props.dispatch;e({type:"global/fetchSpends",payload:{num_months:t.target.value,groupby:"res_type"}})}},{key:"componentDidMount",value:function(){var t=this.props.dispatch;t({type:"global/fetchSpends",payload:{num_months:3,groupby:"res_type"}})}},{key:"componentDidUpdate",value:function(t){this.props.global.spends.length}},{key:"transformToTabular",value:function(t){var e=null;try{e=t.map(function(t,e,a){var n=t.summary;if(0==n.length){var l=a.length,u=(0,S.default)().subtract(l-1-e,"months").format("MMMM YYYY");return{month:u,rate:"0 SAR"}}var r=n.reduce(function(t,e){return t+Number(e.rate)},0);return{month:(0,S.default)(n[0].begin).format("MMMM YYYY"),rate:"".concat(r," SAR")}})}catch(t){}return e}},{key:"render",value:function(){var t=this;if(this.props.isLoadingData)return g.default.createElement("div",{style:{textAlign:"center",marginTop:"150px"}},g.default.createElement(f.default,{indicator:g.default.createElement(b.LoadingOutlined,{style:{fontSize:34},spin:!0})}));var e=this.props.global.spends,a=(0,M.transform)(e),n=[];return e.length>0&&(n=this.transformToTabular(e)),g.default.createElement(g.default.Fragment,null,g.default.createElement("div",{style:{padding:"35px"}},g.default.createElement(r.default.Group,{defaultValue:"3",buttonStyle:"solid"},g.default.createElement(r.default.Button,{value:"3",onChange:function(e){return t.handleMonthSelect(e)}},"Last 3 Months"),g.default.createElement(r.default.Button,{value:"6",onChange:function(e){return t.handleMonthSelect(e)}},"Last 6 Months"),g.default.createElement(r.default.Button,{value:"12",onChange:function(e){return t.handleMonthSelect(e)}},"Last 12 Months")),g.default.createElement(v.default,{dataSource:a}),g.default.createElement(u.default,{dataSource:n,columns:E})))}}]),e}(g.PureComponent))||d);e.default=k}}]);