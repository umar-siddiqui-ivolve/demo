(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{joKM:function(e,t,a){"use strict";var l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a("q1tI"));a("jCWc");var r=l(a("kPKH"));a("+L6B");var i=l(a("2/Rp"));a("5NDa");var o=l(a("5rEg"));a("T2oS");var u=l(a("W9HT"));a("14J3");var s=l(a("BMrR"));a("y8nQ");var d=l(a("Vl3Y"));a("tU7J");var f=l(a("wFql")),c=l(a("p0pE")),p=l(a("2Taf")),m=l(a("vZ4D")),h=l(a("l4Ni")),g=l(a("ujKo")),y=l(a("MhPg"));a("OaEy");var v=l(a("2fM7"));a("Pwec");var E=l(a("CtXQ")),b=(l(a("i8i4")),a("MuoO")),k=n.default.createElement(E.default,{type:"loading",style:{paddingLeft:"2px",fontSize:18,marginRight:"5px"},spin:!0}),w=v.default.Option,P=function(e){function t(){var e,a;(0,p.default)(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return a=(0,h.default)(this,(e=(0,g.default)(t)).call.apply(e,[this].concat(n))),a.state={interfaceType:"bynetwork"},a}return(0,y.default)(t,e),(0,m.default)(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.props.form.validateFields(function(e,a){if(!e){a.keys,a.names;t.props.dispatch({type:"ecs/attachNetwork",payload:(0,c.default)({},a,{id:t.props.mountedData.instanceId})})}})}},{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e,t){!0===e.attachingNetwork&&!1===this.props.attachingNetwork&&this.props.dispatch({type:"drawer/closeDrawer"})}},{key:"onChange",value:function(e){this.setState({interfaceType:e})}},{key:"getAllNetworks",value:function(){0!==this.props.vpc.list.length&&0!==this.props.vpc.subnetList.length||(0===this.props.vpc.list.length&&this.props.dispatch({type:"vpc/update"}),0===this.props.vpc.subnetList.length&&this.props.dispatch({type:"vpc/fetchSubnet"}))}},{key:"getAllPorts",value:function(){0===this.props.port.portList.length&&this.props.dispatch({type:"router/fetchPort"})}},{key:"render",value:function(){var e=this.props.port.portList.filter(function(e){return""===e.device_id}),t=this.props.form.getFieldDecorator,a=!0;a=!(!this.props.fetchingNetworks&&!this.props.fetchingSubnets);var l=!0;return l=!!this.props.fetchingPorts,n.default.createElement("div",{style:{marginBottom:"0",backgroundColor:"#fff"}},n.default.createElement(s.default,null,n.default.createElement(r.default,null,n.default.createElement(d.default,{onSubmit:this.handleSubmit.bind(this),layout:"vertical",hideRequiredMark:!0},n.default.createElement(s.default,null,n.default.createElement(f.default.Title,{level:4,style:{fontSize:" 1.2em",fontFamily:"Open Sans",fontWeight:600,color:"#2b7797"}},"Attach interface by"),n.default.createElement(f.default.Paragraph,{style:{color:"#747373",fontSize:"1.1em",marginBottom:"0.3em"}}),n.default.createElement(d.default.Item,null,t("name",{rules:[{required:!0,message:"Please enter keypair name"}],initialValue:"bynetwork"})(n.default.createElement(v.default,{style:{width:"100%"},onChange:this.onChange.bind(this)},n.default.createElement(w,{value:"bynetwork"},"Network"),n.default.createElement(w,{value:"byport"},"Port"))))),"bynetwork"===this.state.interfaceType?n.default.createElement(n.default.Fragment,null,n.default.createElement(s.default,null,n.default.createElement(f.default.Title,{level:4,style:{fontSize:" 1.2em",fontFamily:"Open Sans",fontWeight:600,color:"#2b7797"}},"Network"),n.default.createElement(f.default.Paragraph,{style:{color:"#747373",fontSize:"1.1em",marginBottom:"0.3em"}}),n.default.createElement(d.default.Item,null,t("net_id",{rules:[{required:!0,message:"Please select a Network"}]})(n.default.createElement(v.default,{onFocus:this.getAllNetworks.bind(this),style:{width:"100%"}},a?n.default.createElement(w,{disabled:!0,value:1},n.default.createElement(u.default,{style:{display:"flex",justifyContent:"center",height:"50px",marginTop:"10px"},indicator:k,size:"large"})):this.props.vpc.list.map(function(e){return n.default.createElement(w,{value:e.id},e.name)}))))),n.default.createElement(s.default,null,n.default.createElement(f.default.Title,{level:4,style:{fontSize:" 1.2em",fontFamily:"Open Sans",fontWeight:600,color:"#2b7797"}},"Fixed IP Address"),n.default.createElement(f.default.Paragraph,{style:{color:"#747373",fontSize:"1.1em",marginBottom:"0.3em"}}),n.default.createElement(d.default.Item,null,t("ip_address",{})(n.default.createElement(o.default,{placeholder:"Please enter Fixed IP"}))))):n.default.createElement(s.default,null,n.default.createElement(f.default.Title,{level:4,style:{fontSize:" 1.2em",fontFamily:"Open Sans",fontWeight:600,color:"#2b7797"}},"Port"),n.default.createElement(f.default.Paragraph,{style:{color:"#747373",fontSize:"1.1em",marginBottom:"0.3em"}}),n.default.createElement(d.default.Item,null,t("port_id",{rules:[{required:!0,message:"Please select a Port"}]})(n.default.createElement(v.default,{onFocus:this.getAllPorts.bind(this),style:{width:"100%"}},l?n.default.createElement(w,{disabled:!0,value:1},n.default.createElement(u.default,{style:{display:"flex",justifyContent:"center",height:"50px",marginTop:"10px"},indicator:k,size:"large"})):e.map(function(e){return n.default.createElement(w,{value:e.id},e.name," ",e.fixed_ips[0].ip_address)}))))),n.default.createElement(d.default.Item,null,n.default.createElement(i.default,{loading:this.props.attachingNetwork,type:"primary",htmlType:"submit"},"Submit"))))))}}]),t}(n.default.Component),S=(0,b.connect)(function(e){return{vpc:e.vpc,port:e.router,fetchingSubnets:e.loading.effects["vpc/fetchSubnets"],fetchingNetworks:e.loading.effects["vpc/update"],fetchingPorts:e.loading.effects["router/fetchPort"],attachingNetwork:e.loading.effects["ecs/attachNetwork"]}})(d.default.create()(P));t.default=S}}]);